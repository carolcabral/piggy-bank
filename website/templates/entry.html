{% extends 'base.html' %} {% block head %}
<title>Add new entry</title>

{% endblock %} {% block content %}

<form action="/new-entry" method="POST">
  <div class="mb-3 row">
    <label for="type" class="col-sm-2 col-form-label">Tipo</label>
    <div class="col-sm-10">
      <div class="custom-control custom-switch">
        <input
          type="checkbox"
          class="custom-control-input"
          id="type"
          name="type"
          />
        <label class="custom-control-label" for="type">Despesa </label>
      </div>
    </div>
  </div>

  <div class="mb-3 row">
    <label for="date" class="col-sm-2 col-form-label">Data</label>
    <div class="col-sm-10">
      <input type="date" id="date" name="date">
    </div>
  </div>


  <div class="mb-3 row">
    <label for="value" class="col-sm-2 col-form-label">Valor</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="value" name="value" placeholder="R$ " />
    </div>
  </div>

  <div class="mb-3 row">
    <label for="item" class="col-sm-2 col-form-label">Item</label>
    <div class="col-sm-10">
      <input type="text" class="form-control" id="item" name="item"/>
    </div>
  </div>

  <div class="mb-3 row">
    <label for="group" class="col-sm-2 col-form-label">Grupo</label>
    <div class="col-sm-10">
      
      <select class="form-select" name="group" id="group">
        <option value="" selected disabled>Choose..</option>
        {%for item in groups %}   
              <option name="{{item.id}}" id="{{item.id}}" value="{{item.id}}">{{item.name}}</option>       
        {% endfor %}
        <option value="other">Other</option>
     
      </select>
      <input type=text id="newgroup" name="newgroup" style="display:none;"></input>
    </div>
  </div>

  <div class="mb-3 row">
    <label for="category" class="col-sm-2 col-form-label">Categoria</label>
    <div class="col-sm-10">
      
      <select class="form-select" name="category" id="category">
        <option value="" selected>Choose..</option>
        {%for item in categories %}
              <option name="{{item.id}}" id="{{item.id}}" value="{{item.id}}">{{item.name}}</option>       
        {% endfor %}    
        <option value="other">Other</option>
        
      </select>
      
      <input type=text id="newcategory" name="newcategory" style="display:none;"></input>      
    </div>
  </div>



  <div class="mb-3 row">
    <label for="value" class="col-sm-2 col-form-label"> Frequência</label>
    <fieldset class="row mb-3">
      <div class="col-sm-10">
        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="frequency"
            id="frequency"
            value="1"
            checked
          />
          <label class="form-check-label" for="gridRadios1"> Único </label>
        </div>

        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="frequency"
            id="frequency"
            value="2"
            checked
          />
          <label class="form-check-label" for="gridRadios1"> Sempre </label>
        </div>

        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="frequency"
            id="frequency"
            value="3"
            checked
          />
          <label class="form-check-label" for="gridRadios1"> R$/N </label>
        </div>

        <div class="form-check">
          <input
            class="form-check-input"
            type="radio"
            name="frequency"
            id="frequency"
            value="4"
            checked
          />
          <label class="form-check-label" for="gridRadios1"> NXR$ </label>
        </div>
      </div>
    </fieldset>
  </div>

  <div class="mb-3 row">
    <label for="button" class="col-sm-2 col-form-label"></label>
    <div class="col-sm-10">
      <button type="submit" class="btn btn-primary mb-3">Add new entry</button>
    </div>
  </div>
</form>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script>
  // Toggle user input for new categories
  $('select').on('change', function () {
    var type = $(this).attr('id')   
    var value = $("#" + type + " option:selected").val();
    if (value == "other"){
      $("#new" + type).show();
    } 
    else {
      $("#new" + type).hide();
    }})
</script>
{% endblock %}
